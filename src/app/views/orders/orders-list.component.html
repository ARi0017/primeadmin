<div class="col-lg-12">

  <div class="card">

    <div class="card-body">
      <div class="row">
        <div class="col-sm-3">
          <div class="row form-group">
            <label class="col-md-3 col-form-label text-right">Order</label>
            <div class="col-md-9">
              <input type="text" class="form-control" [(ngModel)] = "ordernumber" placeholder="Enter Order No"  />
            </div>
          </div>
        </div>
        <div class="col-sm-4">
          <div class="row form-group">
            <label class="col-md-3 col-form-label text-right">Driver</label>
            <div class="col-md-9">
              <input type="text" class="form-control" [(ngModel)] = "drivername" placeholder="Enter Driver"  />
            </div>
          </div>
        </div>
        <div class="col-sm-3">
          <div class="row form-group">
            <label class="col-md-5 col-form-label text-right">Status</label>
            <div class="col-md-7">
              <select  class="form-control" [(ngModel)]="orderstatus">
                <option [value]="0" selected>Select</option>
                <option [value]="1">Pending</option>
                <option [value]="2">Processing</option>
                <option [value]="3">Completed</option>
                <option [value]="4">Cancelled</option>
            </select>
            </div>
          </div>
        </div>
        <div class="col-sm-2">
          <button type="button" (click)="getOrders(1)" class="btn btn-sm btn-primary">
            <i class="fa fa-dot-circle-o"></i>
            Search
          </button>
        </div>
      </div>

        <table class="table table-striped table-hover">
        <thead>
          <tr>
            <th>Order #</th>
            <th>Status</th>
            <th>Payment Mode</th>
            <th>Order Total</th>
            <th>Customer</th>
            <th>Order Details</th>
            <th>Driver</th>
            <th>Cancel</th>
            <th>Print</th>

          </tr>
        </thead>
        <tbody>
          <tr *ngFor="let dataval of data">
            <td>{{dataval.OrderNo}}<br/>
            On: {{dataval.OrderedOn | date:"dd/MM/yyyy HH:mm"}}            
            </td>
            <td>
              <span class="btn btn-warning btn-sm text-light" *ngIf="dataval.OrderStatusId == 1;">Pending</span>
              <span class="btn btn-primary btn-sm" *ngIf="dataval.OrderStatusId == 2;">Processing</span>
              <span class="btn btn-success btn-sm" *ngIf="dataval.OrderStatusId == 3;">Complete</span>
              <span class="btn btn-danger btn-sm" *ngIf="dataval.OrderStatusId == 4;">Cancelled</span>
            </td>
            <td>{{dataval.PaymentMode}}</td>
            <td>{{dataval.TotalAmt}}</td>
            <td>{{dataval.CustomerName}}<br/>
         Phone: {{dataval.CustomerPhone}}
            </td>
            <td><span>{{dataval.OrderDetail}}</span> </td>
            <td>
               <select *ngIf="dataval.OrderStatusId <= 3;else isdriverselected"  class="form-control" (change)="mapdriver(dataval.OrderId, $event)"
               [(ngModel)]="dataval.DriverId">
                <option [value]="undefined" disabled  selected>Select</option>
                <option *ngFor="let val of driverdata" [value]="val.DriverId">
                {{val.Name}}
              </option>
            </select>
            <ng-template #isdriverselected>
              {{dataval.DriverName}}
            </ng-template>
          </td>
            <td>
              <a style="cursor: pointer;" *ngIf="dataval.OrderStatusId <= 3;else iscancelled" (click)="cancelOrder(dataval.OrderId, dataval.OrderStatusId)" title="Cancel Order"><i class="fa fa-ban" aria-hidden="true"></i></a>
              <ng-template #iscancelled>
                Cancelled
              </ng-template>
            </td>
            <td>
              <a [routerLink]=""title="Print Order"><i class="fa fa-print" aria-hidden="true"></i></a>
              <!-- (click)="['edit', dataval.BannerId]"  -->
            </td>
          </tr>
        </tbody>

        <tfoot>
          <tr>
              <td colspan="4" class="pull-right">
                  <!-- <mfBootstrapPaginator [rowsOnPageSet]="[5, 10, 15]"></mfBootstrapPaginator> -->
                  <pagination [totalItems]="count" [boundaryLinks]='true' [maxSize]="5" [rotate]='false'
                      [(ngModel)]="page" (pageChanged)="getPagination($event.page)">
                  </pagination>
              </td>
          </tr>
      </tfoot>
      </table>
    </div>
  </div>
</div>
